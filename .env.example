# Database Configuration
# Supported schemes: postgres, postgresql, mysql, redis
DB_URL=postgres://user:password@localhost:5432/dbname
# DB_URL=mysql://user:password@localhost:3306/dbname
# DB_URL=redis://localhost:6379/0

# Database Table/Key Settings
TABLE_NAME=downloads
ID_FIELD=id

# Only applies when using Redis
KEY_PREFIX=myapp_downloads_

# Storage Configuration
# STORAGE_TYPE can be "s3" or "local" (auto-detected if not specified)
# STORAGE_TYPE=s3

# Local Filesystem Storage (alternative to S3)
# Uncomment to use local filesystem instead of S3
# STORAGE_TYPE=local
# STORAGE_PATH=/mnt/files

# S3-Compatible Storage
S3_ENDPOINT=https://your-account.r2.cloudflarestorage.com
S3_REGION=us-east-1
S3_FORCE_PATH_STYLE=false
S3_ACCESS_KEY_ID=your_access_key
S3_SECRET_ACCESS_KEY=your_secret_key

# Security Settings
ENFORCE_SIGNING=false
SIGNING_SECRET=your-hmac-secret-key-here

# Feature Flags
APPEND_YMD=false
SANITIZE_FILENAMES=true

# If true, skip missing files and create ZIP with available files only
# Only fails if ALL requested files are missing
IGNORE_MISSING=false

MAX_CONCURRENT_FETCHES=10

# Resource Limits
# Maximum concurrent download requests (0 = unlimited)
# Requests beyond this limit receive 503 Service Unavailable
# Example: MAX_ACTIVE_DOWNLOADS=100
MAX_ACTIVE_DOWNLOADS=0
# Maximum number of files per download request (0 = unlimited)
MAX_FILES_PER_REQUEST=0

# File Extension Filtering
# Allow only specific extensions (comma-separated, empty = allow all)
# Example: ALLOWED_EXTENSIONS=.pdf,.txt,.jpg
ALLOWED_EXTENSIONS=
# Block specific extensions (comma-separated)
# Example: BLOCKED_EXTENSIONS=.exe,.sh,.bat
BLOCKED_EXTENSIONS=

# Password-Protected ZIPs
# Allow password-protected ZIP files (requires password field in download record)
ALLOW_PASSWORD_PROTECTED=false

# Server Configuration
PORT=8080
ENABLE_HTTPS=false

# Let's Encrypt (only if ENABLE_HTTPS=true)
LETSENCRYPT_DOMAINS=example.com,www.example.com
LETSENCRYPT_CACHE_DIR=./certs
LETSENCRYPT_EMAIL=admin@example.com

# Metrics Authentication (BasicAuth - optional)
METRICS_USERNAME=admin
METRICS_PASSWORD=secret
